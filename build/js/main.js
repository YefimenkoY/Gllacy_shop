!function(){new WOW({boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0}).init();$(".slider").slick({dots:!0,infinite:!0,speed:600,autoplaySpeed:3e3,slidesToShow:1,autoplay:!0,adaptiveHeight:!1,arrows:!1}),$(function(){var n=$(".slick-dots li");n.each(function(){var n=$(this);n.on("click",function(n){n.preventDefault();var a=$(this).index()+1,t=$("body");t.attr("class","").addClass("bg-color-"+a)})})})}(),function(){$(function(){var n=$(".button").not(".button--map").not(".button--callback"),a=$(".map .container").offset().top,t=1e3;n.each(function(){var n=$(this);n.on("click",function(n){n.preventDefault(),$("body").animate({scrollTop:a},t,"linear")})})})}(),function(){$(function(){var n=$(".empty"),a=$(".callback"),t=$(".button--map .button__link"),e=a.find(".callback__close"),o=300;t.on("click",function(t){t.preventDefault(),a.addClass("open-popup"),n.add(a).fadeIn(0),setTimeout(function(){a.removeClass("open-popup")},500)}),e.on("click",function(t){t.preventDefault(),n.add(a).fadeOut(o)})})}(),function(){$(function(){var n=$(".nav__item--hover"),a=n.find(".menu"),t=$(".form__submit"),e=t.find(".form__hover"),o=400,i=function(n,a){n.hover(function(){a.css({visibility:"visible"}).stop().fadeIn(o)},function(){a.stop().fadeOut(o)})};i(n,a),i(t,e)})}(),function(){$(function(){var n=/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/,a=/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,t=$(".callback__form"),e=t.closest(".callback"),o=$('input[name="e-mail"]'),i=$('input[name="name"]'),u=$("textarea"),c=$('input[name="e-mail"], input[name="name"], textarea'),r=500,s=function(n,a){return a.test(n)},l=function(n,a,t){a?n.val()&&s(n.val(),a)?p(n):(t.preventDefault(),f(e,n)):n.val()?p(n):(t.preventDefault(),f(e,n))},f=function(n,a){n.addClass("error"),a.addClass("error-input"),setTimeout(function(){n.removeClass("error")},r)},p=function(n){n.removeClass("error-input")},v=function(n){var a="/massage";$.ajax({type:"POST",url:a,data:t.serialize(),success:function(n){var a=JSON.parse(n);d(a)}}),n.preventDefault()};t.on("submit",function(t){var e=!0,r=$(".empty"),s=$(".callback");l(o,n,t),l(i,a,t),l(u,!1,t),c.each(function(){var n=$(this);n.is(".error-input")&&(e=!1)}),e&&(v(t),r.add(s).fadeOut(1e3),c.each(function(){var n=$(this);n.val("")}))});var d=function(n){var a='<div class="popup"> <div class="popup__text"> <p>Здравствуйте {{name}}! <br>Ваше сообщение успешно отправлено! </p> </div> </div>',t=a.replace(/{{name}}/g,n.name);$(t).appendTo("body"),$(".popup").fadeIn(r),c.each(function(){var n=$(this);n.val("")}),setTimeout(function(){$(".popup").fadeOut(r).remove()},5e3)}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiV09XIiwiYm94Q2xhc3MiLCJhbmltYXRlQ2xhc3MiLCJvZmZzZXQiLCJtb2JpbGUiLCJsaXZlIiwiaW5pdCIsIiQiLCJzbGljayIsImRvdHMiLCJpbmZpbml0ZSIsInNwZWVkIiwiYXV0b3BsYXlTcGVlZCIsInNsaWRlc1RvU2hvdyIsImF1dG9wbGF5IiwiYWRhcHRpdmVIZWlnaHQiLCJhcnJvd3MiLCJzbGlja0RvdHMiLCJlYWNoIiwiJHRoaXMiLCJ0aGlzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJpbmRleCIsImJvZHkiLCJhdHRyIiwiYWRkQ2xhc3MiLCJidXR0b25zIiwibm90Iiwic2Nyb2xsVG8iLCJ0b3AiLCJUSU1FX0FOSU1BVElPTiIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJlbXB0eUxheW91dCIsImNhbGxiYWNrIiwiYnV0dG9uIiwiY2xvc2VCdXR0b24iLCJmaW5kIiwiYWRkIiwiZmFkZUluIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwiZmFkZU91dCIsIml0ZW0iLCJwYXJlbnQiLCJmb3JtIiwiZm9ybUhvdmVyIiwic2hvd0l0ZW0iLCJpdGVtUGFyZW50IiwiaXRtZUNoaWxkIiwiaG92ZXIiLCJjc3MiLCJ2aXNpYmlsaXR5Iiwic3RvcCIsInJlZ0VtYWlsIiwicmVnTmFtZSIsImNsb3Nlc3QiLCJlbWFpbEZpZWxkRm9ybSIsIm5hbWVGaWVsZEZvcm0iLCJ0ZXh0YXJlYUZpZWxkRm9ybSIsImZpZWxkcyIsIkRVUkFUSU9OIiwiaXNWYWxpZCIsImRhdGEiLCJ0ZW1wIiwidGVzdCIsImNoZWNrRmllbGQiLCJmaWVsZCIsInJlZ1R5cGUiLCJldmVudCIsInZhbCIsImhpZGVFcnJvciIsInNob3dFcnJvciIsImFqYXhSZXEiLCJVUkwiLCJhamF4IiwidHlwZSIsInVybCIsInNlcmlhbGl6ZSIsInN1Y2Nlc3MiLCJkYXRhUGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiY3JlYXRlUG9wdXAiLCJ0dW5uZWwiLCJlbXB0eSIsImlzIiwib2JqIiwicmVzIiwicmVwbGFjZSIsIm5hbWUiLCJhcHBlbmRUbyIsInJlbW92ZSJdLCJtYXBwaW5ncyI6IkNBQ0MsV0FFYSxHQUFJQSxNQUVOQyxTQUFjLE1BQ2RDLGFBQWMsV0FDZEMsT0FBYyxFQUNkQyxRQUFjLEVBQ2RDLE1BQWMsSUFFcEJDLE1BRUZDLEdBQUUsV0FBV0MsT0FDVEMsTUFBTSxFQUNOQyxVQUFVLEVBQ1ZDLE1BQU8sSUFDUEMsY0FBZSxJQUNmQyxhQUFjLEVBQ2RDLFVBQVUsRUFDVkMsZ0JBQWdCLEVBQ2hCQyxRQUFRLElBSVpULEVBQUUsV0FDRSxHQUFJVSxHQUFZVixFQUFFLGlCQUVsQlUsR0FBVUMsS0FBSyxXQUNYLEdBQUlDLEdBQVFaLEVBQUVhLEtBRWRELEdBQU1FLEdBQUcsUUFBUyxTQUFTQyxHQUN2QkEsRUFBRUMsZ0JBRUYsSUFBSUMsR0FBUWpCLEVBQUVhLE1BQU1JLFFBQVUsRUFDMUJDLEVBQU9sQixFQUFFLE9BRWJrQixHQUNLQyxLQUFLLFFBQVMsSUFDZEMsU0FBUyxZQUFjSCxZQUszQyxXQUVHakIsRUFBRSxXQUVFLEdBQ0lxQixHQUFVckIsRUFBRSxXQUNQc0IsSUFBSSxnQkFDSkEsSUFBSSxxQkFDVEMsRUFBV3ZCLEVBQUUsbUJBQW1CSixTQUFTNEIsSUFDekNDLEVBQWtCLEdBRXRCSixHQUFRVixLQUFLLFdBQ1QsR0FBSUMsR0FBUVosRUFBRWEsS0FFZEQsR0FBTUUsR0FBRyxRQUFTLFNBQVNDLEdBQ3ZCQSxFQUFFQyxpQkFFRmhCLEVBQUUsUUFBUTBCLFNBQ05DLFVBQVdKLEdBQ2JFLEVBQWdCLG1CQUtqQyxXQUVHekIsRUFBRSxXQUNFLEdBQ0k0QixHQUFjNUIsRUFBRSxVQUNoQjZCLEVBQVc3QixFQUFFLGFBQ2I4QixFQUFTOUIsRUFBRSw4QkFDWCtCLEVBQWNGLEVBQVNHLEtBQUssb0JBQzVCUCxFQUFpQixHQUVyQkssR0FBT2hCLEdBQUcsUUFBUyxTQUFTQyxHQUN4QkEsRUFBRUMsaUJBRUZhLEVBQVNULFNBQVMsY0FF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IG5ldyBXT1coXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJveENsYXNzOiAgICAgJ3dvdycsXG4gICAgICAgICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXG4gICAgICAgICAgICBvZmZzZXQ6ICAgICAgIDAsXG4gICAgICAgICAgICBtb2JpbGU6ICAgICAgIHRydWUsXG4gICAgICAgICAgICBsaXZlOiAgICAgICAgIHRydWVcbiAgICAgICAgfVxuICAgICkuaW5pdCgpO1xuXG4gICAgJCgnLnNsaWRlcicpLnNsaWNrKHtcbiAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgIHNwZWVkOiA2MDAsXG4gICAgICAgIGF1dG9wbGF5U3BlZWQ6IDMwMDAsXG4gICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgIGFkYXB0aXZlSGVpZ2h0OiBmYWxzZSxcbiAgICAgICAgYXJyb3dzOiBmYWxzZVxuICAgIH0pO1xuXG5cbiAgICAkKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2xpY2tEb3RzID0gJCgnLnNsaWNrLWRvdHMgbGknKTtcblxuICAgICAgICBzbGlja0RvdHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICR0aGlzLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCkgKyAxLFxuICAgICAgICAgICAgICAgICAgICBib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdiZy1jb2xvci0nICsgaW5kZXgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9KTtcbn0oKSk7XG4oZnVuY3Rpb24oKSB7XG5cbiAgICAkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgYnV0dG9ucyA9ICQoJy5idXR0b24nKVxuICAgICAgICAgICAgICAgIC5ub3QoJy5idXR0b24tLW1hcCcpXG4gICAgICAgICAgICAgICAgLm5vdCgnLmJ1dHRvbi0tY2FsbGJhY2snKSxcbiAgICAgICAgICAgIHNjcm9sbFRvID0gJCgnLm1hcCAuY29udGFpbmVyJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgVElNRV9BTklNQVRJT04gPSAgMTAwMDtcblxuICAgICAgICBidXR0b25zLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkdGhpcy5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxUb1xuICAgICAgICAgICAgICAgIH0sVElNRV9BTklNQVRJT04sICdsaW5lYXInKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfSlcbn0oKSk7XG4oZnVuY3Rpb24oKSB7XG5cbiAgICAkKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgIGVtcHR5TGF5b3V0ID0gJCgnLmVtcHR5JyksXG4gICAgICAgICAgICBjYWxsYmFjayA9ICQoJy5jYWxsYmFjaycpLFxuICAgICAgICAgICAgYnV0dG9uID0gJCgnLmJ1dHRvbi0tbWFwIC5idXR0b25fX2xpbmsnKSxcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uID0gY2FsbGJhY2suZmluZCgnLmNhbGxiYWNrX19jbG9zZScpLFxuICAgICAgICAgICAgVElNRV9BTklNQVRJT04gPSAzMDA7XG5cbiAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY2FsbGJhY2suYWRkQ2xhc3MoJ29wZW4tcG9wdXAnKTtcblxuICAgICAgICAgICAgZW1wdHlMYXlvdXRcbiAgICAgICAgICAgICAgICAuYWRkKGNhbGxiYWNrKVxuICAgICAgICAgICAgICAgIC5mYWRlSW4oMCk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sucmVtb3ZlQ2xhc3MoJ29wZW4tcG9wdXAnKVxuICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICB9KTtcblxuICAgICAgICBjbG9zZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlbXB0eUxheW91dFxuICAgICAgICAgICAgICAgIC5hZGQoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgLmZhZGVPdXQoVElNRV9BTklNQVRJT04pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0oKSk7XG4oZnVuY3Rpb24oKSB7XG4gICAgJChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBpdGVtID0gJCgnLm5hdl9faXRlbS0taG92ZXInKSxcbiAgICAgICAgICAgIHBhcmVudCA9IGl0ZW0uZmluZCgnLm1lbnUnKSxcbiAgICAgICAgICAgIGZvcm0gPSAkKCcuZm9ybV9fc3VibWl0JyksXG4gICAgICAgICAgICBmb3JtSG92ZXIgPSBmb3JtLmZpbmQoJy5mb3JtX19ob3ZlcicpLFxuICAgICAgICAgICAgVElNRV9BTklNQVRJT04gPSA0MDA7XG5cbiAgICAgICAgdmFyIHNob3dJdGVtID0gZnVuY3Rpb24oaXRlbVBhcmVudCwgaXRtZUNoaWxkKSB7XG5cbiAgICAgICAgICAgIGl0ZW1QYXJlbnQuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaXRtZUNoaWxkXG4gICAgICAgICAgICAgICAgICAgIC5jc3Moe3Zpc2liaWxpdHk6ICd2aXNpYmxlJ30pXG4gICAgICAgICAgICAgICAgICAgIC5zdG9wKClcbiAgICAgICAgICAgICAgICAgICAgLmZhZGVJbihUSU1FX0FOSU1BVElPTik7XG4gICAgICAgICAgICB9LGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGl0bWVDaGlsZFxuICAgICAgICAgICAgICAgICAgICAuc3RvcCgpXG4gICAgICAgICAgICAgICAgICAgIC5mYWRlT3V0KFRJTUVfQU5JTUFUSU9OKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgc2hvd0l0ZW0oaXRlbSwgcGFyZW50KTtcbiAgICAgICAgc2hvd0l0ZW0oZm9ybSwgZm9ybUhvdmVyKTtcbiAgICB9KTtcbn0oKSk7XG4oZnVuY3Rpb24oKSB7XG5cbiAgICAkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhclxuICAgICAgICAgICAgcmVnRW1haWwgPSAvXihbYS16MC05Xy1dK1xcLikqW2EtejAtOV8tXStAW2EtejAtOV8tXSsoXFwuW2EtejAtOV8tXSspKlxcLlthLXpdezIsNn0kLyxcbiAgICAgICAgICAgIHJlZ05hbWUgPSAvXlthLXpBLVonXVthLXpBLVotJyBdK1thLXpBLVonXT8kLyxcbiAgICAgICAgICAgIGZvcm0gPSAkKCcuY2FsbGJhY2tfX2Zvcm0nKSxcbiAgICAgICAgICAgIHBhcmVudCA9IGZvcm0uY2xvc2VzdCgnLmNhbGxiYWNrJyksXG4gICAgICAgICAgICBlbWFpbEZpZWxkRm9ybSA9ICQoJ2lucHV0W25hbWU9XCJlLW1haWxcIl0nKSxcbiAgICAgICAgICAgIG5hbWVGaWVsZEZvcm0gPSAkKCdpbnB1dFtuYW1lPVwibmFtZVwiXScpLFxuICAgICAgICAgICAgdGV4dGFyZWFGaWVsZEZvcm0gPSAkKCd0ZXh0YXJlYScpLFxuICAgICAgICAgICAgZmllbGRzID0gJCgnaW5wdXRbbmFtZT1cImUtbWFpbFwiXSwgaW5wdXRbbmFtZT1cIm5hbWVcIl0sIHRleHRhcmVhJyksXG4gICAgICAgICAgICBEVVJBVElPTiA9ICA1MDA7XG5cbiAgICAgICAgdmFyIGlzVmFsaWQgPSBmdW5jdGlvbihkYXRhLCB0ZW1wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGVtcC50ZXN0KGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBjaGVja0ZpZWxkID0gZnVuY3Rpb24oZmllbGQsIHJlZ1R5cGUsIGV2ZW50KSB7XG5cbiAgICAgICAgICAgIGlmICghcmVnVHlwZSkge1xuICAgICAgICAgICAgICAgIGlmICggIWZpZWxkLnZhbCgpICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IocGFyZW50LCBmaWVsZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUVycm9yKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZmllbGQudmFsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yKHBhcmVudCwgZmllbGQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzVmFsaWQoZmllbGQudmFsKCksIHJlZ1R5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHNob3dFcnJvcihwYXJlbnQsIGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBoaWRlRXJyb3IoZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc2hvd0Vycm9yID0gZnVuY3Rpb24ocGFyZW50LCBmaWVsZCkge1xuICAgICAgICAgICAgcGFyZW50XG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmaWVsZFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3ItaW5wdXQnKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgfSwgRFVSQVRJT04pXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGhpZGVFcnJvciA9IGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgICAgICAgIGZpZWxkXG4gICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2Vycm9yLWlucHV0Jyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGFqYXhSZXEgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIFVSTCA9ICcvbWFzc2FnZSc7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBVUkwsXG4gICAgICAgICAgICAgICAgZGF0YTogZm9ybS5zZXJpYWxpemUoKSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhUGFyc2VkID0gSlNPTi5wYXJzZShkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVQb3B1cChkYXRhUGFyc2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgdHVubmVsID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbXB0eSA9ICQoJy5lbXB0eScpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gJCgnLmNhbGxiYWNrJyk7XG5cbiAgICAgICAgICAgIGNoZWNrRmllbGQoZW1haWxGaWVsZEZvcm0sIHJlZ0VtYWlsLCBlKTtcbiAgICAgICAgICAgIGNoZWNrRmllbGQobmFtZUZpZWxkRm9ybSwgcmVnTmFtZSwgZSk7XG4gICAgICAgICAgICBjaGVja0ZpZWxkKHRleHRhcmVhRmllbGRGb3JtLCBmYWxzZSwgZSk7XG5cbiAgICAgICAgICAgIGZpZWxkcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCAkdGhpcy5pcygnLmVycm9yLWlucHV0JykgKSB7XG4gICAgICAgICAgICAgICAgICAgIHR1bm5lbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodHVubmVsKSB7XG4gICAgICAgICAgICAgICAgYWpheFJlcShlKTtcblxuICAgICAgICAgICAgICAgIGVtcHR5LmFkZChjYWxsYmFjaylcbiAgICAgICAgICAgICAgICAgICAgLmZhZGVPdXQoMTAwMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmllbGRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAkdGhpcy52YWwoJycpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcmVhdGVQb3B1cCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSAnPGRpdiBjbGFzcz1cInBvcHVwXCI+IDxkaXYgY2xhc3M9XCJwb3B1cF9fdGV4dFwiPiA8cD7Ql9C00YDQsNCy0YHRgtCy0YPQudGC0LUge3tuYW1lfX0hJyArXG4gICAgICAgICAgICAgICAgJyA8YnI+0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+ISA8L3A+IDwvZGl2PiA8L2Rpdj4nO1xuXG4gICAgICAgICAgICB2YXIgcmVzID0gdGVtcC5yZXBsYWNlKC97e25hbWV9fS9nLCBvYmoubmFtZSk7XG5cbiAgICAgICAgICAgICQocmVzKS5hcHBlbmRUbygnYm9keScpO1xuXG4gICAgICAgICAgICAkKCcucG9wdXAnKS5mYWRlSW4oRFVSQVRJT04pO1xuXG4gICAgICAgICAgICBmaWVsZHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICR0aGlzLnZhbCgnJylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJy5wb3B1cCcpLmZhZGVPdXQoRFVSQVRJT04pXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0sIDUwMDApXG4gICAgICAgIH07XG4gICAgfSlcbn0oKSk7Il19
